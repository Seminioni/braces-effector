{"version":3,"sources":["webpack:///./src/ui/MainHeader.vue?8e25","webpack:///./src/ui/MainHeader.vue?8fd3","webpack:///./src/ui/MainHeader.vue","webpack:///./src/ui/MainHeader.vue?5aa6","webpack:///./src/ui/MainHeader.vue?b8c0","webpack:///./src/modules/search/components/SearchModal.vue?196c","webpack:///./src/modules/search/components/SearchTextfield.vue?c413","webpack:///./src/modules/search/components/Search.vue?964c","webpack:///./src/modules/search/model.ts","webpack:///./src/modules/search/components/SearchTextfield.vue?8a00","webpack:///./src/modules/search/components/SearchTextfield.vue","webpack:///./src/modules/search/components/SearchTextfield.vue?c466","webpack:///./src/modules/search/components/SearchTextfield.vue?41fd","webpack:///./src/modules/search/components/SearchModal.vue?0b89","webpack:///./src/modules/search/components/SearchModal.vue","webpack:///./src/modules/search/components/SearchModal.vue?8c37","webpack:///./src/modules/search/components/SearchModal.vue?a296","webpack:///./src/modules/search/components/Search.vue","webpack:///./src/modules/search/components/Search.vue?9a98","webpack:///./src/modules/search/components/Search.vue?f16f","webpack:///./src/modules/search/index.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","$isMobile","_e","class","attrs","Object","keys","$productsInCart","length","name","_v","on","$event","$emit","staticRenderFns","extend","effector","components","Search","Logo","BrUserControl","BrBadge","component","state","$isLoading","results","handleToggle","model","value","callback","$$v","query","expression","isOpened","fxFetchProducts","handler","fetchProducts","data","handleChange","$results","pending","_","isLoading","done","result","products","map","product","categoryProductUrl","slice","reset","watch","autocomplete","isFocused","pulse","loading","isResultShown","_b","domProps","target","$attrs","_l","key","id","handleClick","_s","title","BrLoader","inheritAttrs","prop","event","props","type","String","default","Boolean","Array","computed","methods","ev","textContent","trim","ref","SearchTextfield","closeIcon","destroyed","mounted","search","$refs","$el","querySelector","focus","store","SearchModal","filter","p","toLowerCase","indexOf"],"mappings":"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","file":"public/js/chunk-7e058893.e0a46469.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=style&index=0&id=2cd481b8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=style&index=0&id=2cd481b8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row align-center\"},[(!_vm.$isMobile)?_c('div',{staticClass:\"col main-header__logo\"},[_c('logo')],1):_vm._e(),_c('div',{staticClass:\"col\",class:{ 'main-header__search': !_vm.$isMobile }},[_c('search')],1),(!_vm.$isMobile)?_c('div',{staticClass:\"col main-header__controls justify-end align-center\"},[_c('br-badge',{attrs:{\"count\":Object.keys(_vm.$productsInCart).length}},[_c('br-user-control',{attrs:{\"to\":{ name: 'CartPage' },\"icon\":\"cart\"}},[_vm._v(\"\\n          Кошик\\n        \")])],1),_c('br-user-control',{attrs:{\"icon\":\"menu\"},on:{\"click\":function($event){return _vm.$emit('toggle')}}},[_vm._v(\"\\n        Меню\\n      \")])],1):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\n\nimport { $isMobile } from \"@/core/session\";\nimport { Search } from \"@/modules/search\";\nimport { $productsInCart } from \"@/modules/cart\";\n\nimport { BrUserControl, BrBadge } from \"@/shared\";\n\nimport Logo from \"@/ui/Logo.vue\";\n\nexport default Vue.extend({\n  name: \"MainHeader\",\n\n  effector() {\n    return {\n      $isMobile,\n      $productsInCart,\n    };\n  },\n\n  components: {\n    Search,\n    Logo,\n    BrUserControl,\n    BrBadge,\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MainHeader.vue?vue&type=template&id=2cd481b8&scoped=true&\"\nimport script from \"./MainHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./MainHeader.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MainHeader.vue?vue&type=style&index=0&id=2cd481b8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cd481b8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=style&index=0&id=12a112aa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=style&index=0&id=12a112aa&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=style&index=0&id=8cae4aa6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=style&index=0&id=8cae4aa6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('search-textfield',{attrs:{\"readonly\":_vm.state.$isMobile,\"loading\":_vm.state.$isLoading,\"autocomplete\":!_vm.state.$isMobile,\"results\":_vm.results},on:{\"toggle\":_vm.handleToggle},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}),_c('transition',{attrs:{\"name\":\"slide-top\",\"mode\":\"out-in\"}},[(_vm.state.$isMobile && _vm.isOpened)?_c('search-modal',{attrs:{\"results\":_vm.results,\"loading\":_vm.state.$isLoading},on:{\"toggle\":_vm.handleToggle},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { createStore, createEffect, createEvent } from \"effector\";\nimport debounce from \"lodash.debounce\";\n\nimport productsService, { Product } from \"@/services/products.service\";\n\nconst fxFetchProducts = createEffect<string, Product[]>(\"fxFetchProducts\", {\n  handler: async (query) => {\n    const data = await productsService.fetchProducts(`like:\"%${query}%\"`);\n    return data;\n  },\n});\n\nconst reset = createEvent(\"reset\");\nconst handleChange = createEvent<string>(\"change query\");\n\nconst $results = createStore<Product[]>([]);\nconst $isLoading = createStore(false)\n  .on(fxFetchProducts.pending, (_, isLoading) => isLoading);\n\n$results\n  .on(fxFetchProducts.done, (_, { result: products }) => products.map(product => ({\n    ...product,\n    categoryProductUrl: `/products/${product.categoryProductUrl.slice(12)}`,\n  })))\n  .reset(reset);\n\n\nhandleChange.watch(debounce(async (query) => {\n  if (query.length) {\n    await fxFetchProducts(query);\n  }\n}, 500));\n\n\nexport {\n  $results,\n  $isLoading,\n  reset,\n  handleChange,\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-textfield\",class:{ autocomplete: _vm.autocomplete },attrs:{\"tabindex\":\"-1\"},on:{\"focus\":function($event){_vm.isFocused = true},\"blur\":function($event){_vm.isFocused = false},\"click\":function($event){return _vm.$emit('toggle')}}},[_c('div',{staticClass:\"search-textfield__input-wrapper\",class:{ pulse: _vm.loading, 'with-result': _vm.isResultShown }},[_c('input',_vm._b({staticClass:\"search-textfield__input\",class:{ autocomplete: _vm.autocomplete },attrs:{\"type\":\"text\",\"placeholder\":\"Пошук...\"},domProps:{\"value\":_vm.query},on:{\"input\":function($event){return _vm.$emit('input', $event.target.value)},\"focus\":function($event){_vm.isFocused = true}}},'input',_vm.$attrs,false)),(_vm.loading && _vm.autocomplete)?_c('br-loader',{staticClass:\"search-textfield__loader\"}):_vm._e()],1),(_vm.isResultShown)?_c('ul',{staticClass:\"search-modal__results-list\"},_vm._l((_vm.results),function(product){return _c('li',{key:product.id,staticClass:\"search-modal__results-item\",on:{\"!click\":function($event){return _vm.handleClick($event)}}},[_c('router-link',{staticClass:\"body-text-14 search-modal__results-link\",attrs:{\"to\":product.categoryProductUrl}},[_vm._v(\"\\n        \"+_vm._s(product.title)+\"\\n      \")])],1)}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue, { PropType } from \"vue\";\n\nimport { BrLoader } from \"@/shared\";\nimport { Product } from \"@/services/products.service\";\n\nexport default Vue.extend({\n  name: \"SearchTextfield\",\n\n  components: {\n    BrLoader,\n  },\n\n  inheritAttrs: false,\n\n  model: {\n    prop: \"query\",\n    event: \"input\",\n  },\n\n  props: {\n    query: {\n      type: String,\n      default: \"\",\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n    autocomplete: {\n      type: Boolean,\n      default: false,\n    },\n    results: {\n      type: Array as PropType<Product[]>,\n      default: () => [],\n    },\n  },\n\n  data: () => ({\n    isFocused: false,\n  }),\n\n  computed: {\n    isResultShown(): boolean {\n      return this.isFocused && !!this.results.length && this.autocomplete && !!this.query.length;\n    },\n  },\n  methods: {\n    handleClick(ev: any) {\n      this.$emit(\"input\", ev.target.textContent.trim());\n      this.isFocused = false;\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SearchTextfield.vue?vue&type=template&id=8cae4aa6&scoped=true&\"\nimport script from \"./SearchTextfield.vue?vue&type=script&lang=ts&\"\nexport * from \"./SearchTextfield.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SearchTextfield.vue?vue&type=style&index=0&id=8cae4aa6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8cae4aa6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-modal\"},[_c('div',{staticClass:\"search-modal__topbar\"},[_c('button',{staticClass:\"search-modal__close\",on:{\"click\":function($event){return _vm.$emit('toggle')}}},[_c('close-icon',{attrs:{\"fill\":\"#fff\"}})],1)]),_c('div',{staticClass:\"search-modal__body\"},[_c('header',{staticClass:\"search-modal__header\"},[_c('search-textfield',{ref:\"search\",attrs:{\"query\":_vm.query,\"loading\":_vm.loading},on:{\"input\":function($event){return _vm.$emit('input', $event)}}})],1),_c('ul',{staticClass:\"search-modal__results-list\"},_vm._l((_vm.results),function(product){return _c('li',{key:product.id,staticClass:\"search-modal__results-item\",on:{\"click\":function($event){return _vm.$emit('toggle')}}},[_c('router-link',{staticClass:\"body-text-14 search-modal__results-link\",attrs:{\"to\":product.categoryProductUrl}},[_vm._v(\"\\n          \"+_vm._s(product.title)+\"\\n        \")])],1)}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue, { PropType } from \"vue\";\n\nimport { reset } from \"../model\";\nimport { Product } from \"@/services/products.service\";\n\nimport SearchTextfield from \"./SearchTextfield.vue\";\nimport closeIcon from \"@/assets/vector/close.svg\";\n\nexport default Vue.extend({\n  name: \"SearchModal\",\n\n  components: {\n    SearchTextfield,\n    closeIcon,\n  },\n\n  model: {\n    prop: \"query\",\n    event: \"input\",\n  },\n\n  props: {\n    results: {\n      type: Array as PropType<Product[]>,\n      default: () => [],\n    },\n    query: {\n      type: String,\n      default: \"\",\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  destroyed() {\n    this.$emit(\"input\", \"\");\n    this.reset();\n  },\n\n  mounted() {\n    const search = (this.$refs.search as Vue).$el;\n    search.querySelector(\"input\")!.focus();\n  },\n\n  methods: {\n    reset,\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SearchModal.vue?vue&type=template&id=12a112aa&scoped=true&\"\nimport script from \"./SearchModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./SearchModal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SearchModal.vue?vue&type=style&index=0&id=12a112aa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12a112aa\",\n  null\n  \n)\n\nexport default component.exports","\nimport Vue from \"vue\";\nimport { createStoreObject } from \"effector\";\n\nimport { Product } from \"@/services/products.service\";\nimport { unlockBody, lockBody } from \"@/lib/body-lock\";\nimport { $isMobile } from \"@/core/session\";\nimport { $results, $isLoading, handleChange } from \"../model\";\n\nimport SearchTextfield from \"./SearchTextfield.vue\";\nimport SearchModal from \"./SearchModal.vue\";\n\nconst store = createStoreObject({\n  $isMobile,\n  $results,\n  $isLoading,\n});\n\nexport default Vue.extend({\n  name: \"Search\",\n\n  effector() {\n    return store;\n  },\n\n  components: {\n    SearchTextfield,\n    SearchModal,\n  },\n\n  data: () => ({\n    isOpened: false,\n    query: \"\",\n    state: {} as State<typeof store>,\n  }),\n\n  computed: {\n    results(): Product[] {\n      return this.state.$results\n        .filter(p => p.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\n    },\n  },\n\n  watch: {\n    query: \"handleChange\",\n  },\n\n  methods: {\n    handleChange,\n    handleToggle() {\n      if (!this.state.$isMobile) {\n        return;\n      }\n\n      this.isOpened = !this.isOpened;\n\n      // eslint-disable-next-line no-unused-expressions\n      this.isOpened ? lockBody() : unlockBody();\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=8ffb267a&\"\nimport script from \"./Search.vue?vue&type=script&lang=ts&\"\nexport * from \"./Search.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export { default as Search } from \"./components/Search.vue\";\n"],"sourceRoot":""}