{"version":3,"sources":["webpack:///./src/ui/SimpleHeader.vue?fb29","webpack:///./src/modules/search/components/SearchModal.vue?196c","webpack:///./src/ui/SimpleHeader.vue?601b","webpack:///./src/ui/SimpleHeader.vue","webpack:///./src/ui/SimpleHeader.vue?47e2","webpack:///./src/ui/SimpleHeader.vue?03a2","webpack:///./src/modules/search/components/SearchTextfield.vue?c413","webpack:///./src/modules/search/components/Search.vue?964c","webpack:///./src/modules/search/model.ts","webpack:///./src/modules/search/components/SearchTextfield.vue?8a00","webpack:///./src/modules/search/components/SearchTextfield.vue","webpack:///./src/modules/search/components/SearchTextfield.vue?c466","webpack:///./src/modules/search/components/SearchTextfield.vue?41fd","webpack:///./src/modules/search/components/SearchModal.vue?0b89","webpack:///./src/modules/search/components/SearchModal.vue","webpack:///./src/modules/search/components/SearchModal.vue?8c37","webpack:///./src/modules/search/components/SearchModal.vue?a296","webpack:///./src/modules/search/components/Search.vue","webpack:///./src/modules/search/components/Search.vue?9a98","webpack:///./src/modules/search/components/Search.vue?f16f","webpack:///./src/modules/search/index.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","$isMobile","staticStyle","$route","name","attrs","Object","keys","$productsInCart","length","_v","_e","staticRenderFns","extend","effector","components","Logo","BrBadge","BrUserControl","Search","component","state","$isLoading","results","on","handleToggle","model","value","callback","$$v","query","expression","isOpened","fxFetchProducts","handler","fetchProducts","data","handleChange","$results","pending","_","isLoading","done","result","products","map","product","categoryProductUrl","slice","reset","watch","class","autocomplete","$event","isFocused","$emit","pulse","loading","isResultShown","_b","domProps","target","$attrs","_l","key","id","handleClick","_s","title","BrLoader","inheritAttrs","prop","event","props","type","String","default","Boolean","Array","computed","methods","ev","textContent","trim","ref","SearchTextfield","closeIcon","destroyed","mounted","search","$refs","$el","querySelector","focus","store","SearchModal","filter","p","toLowerCase","indexOf"],"mappings":"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","file":"public/js/chunk-a0107bda.0c275689.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleHeader.vue?vue&type=style&index=0&id=0446b2c6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleHeader.vue?vue&type=style&index=0&id=0446b2c6&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=style&index=0&id=12a112aa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=style&index=0&id=12a112aa&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row justify-center\"},[_c('div',{staticClass:\"col container__inner\"},[(!_vm.$isMobile)?[_c('logo'),(_vm.$route.name !== 'CheckoutSuccessPage')?_c('br-badge',{attrs:{\"count\":Object.keys(_vm.$productsInCart).length}},[_c('br-user-control',{attrs:{\"to\":{ name: 'CartPage' },\"icon\":\"cart\"}},[_vm._v(\"\\n            Кошик\\n          \")])],1):_vm._e()]:_c('search',{staticStyle:{\"width\":\"100%\"}})],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\n\nimport Logo from \"@/ui/Logo.vue\";\nimport { BrBadge, BrUserControl } from \"@/shared\";\n\nimport { $productsInCart } from \"@/modules/cart\";\nimport { Search } from \"@/modules/search\";\n\nimport { $isMobile } from \"@/core/session\";\n\nexport default Vue.extend({\n  name: \"SimpleHeader\",\n\n  effector() {\n    return {\n      $isMobile,\n      $productsInCart,\n    };\n  },\n\n  components: {\n    Logo,\n    BrBadge,\n    BrUserControl,\n    Search,\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SimpleHeader.vue?vue&type=template&id=0446b2c6&scoped=true&\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SimpleHeader.vue?vue&type=style&index=0&id=0446b2c6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0446b2c6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=style&index=0&id=8cae4aa6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=style&index=0&id=8cae4aa6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('search-textfield',{attrs:{\"readonly\":_vm.state.$isMobile,\"loading\":_vm.state.$isLoading,\"autocomplete\":!_vm.state.$isMobile,\"results\":_vm.results},on:{\"toggle\":_vm.handleToggle},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}),_c('transition',{attrs:{\"name\":\"slide-top\",\"mode\":\"out-in\"}},[(_vm.state.$isMobile && _vm.isOpened)?_c('search-modal',{attrs:{\"results\":_vm.results,\"loading\":_vm.state.$isLoading},on:{\"toggle\":_vm.handleToggle},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { createStore, createEffect, createEvent } from \"effector\";\nimport debounce from \"lodash.debounce\";\n\nimport productsService, { Product } from \"@/services/products.service\";\n\nconst fxFetchProducts = createEffect<string, Product[]>(\"fxFetchProducts\", {\n  handler: async (query) => {\n    const data = await productsService.fetchProducts(`like:\"%${query}%\"`);\n    return data;\n  },\n});\n\nconst reset = createEvent(\"reset\");\nconst handleChange = createEvent<string>(\"change query\");\n\nconst $results = createStore<Product[]>([]);\nconst $isLoading = createStore(false)\n  .on(fxFetchProducts.pending, (_, isLoading) => isLoading);\n\n$results\n  .on(fxFetchProducts.done, (_, { result: products }) => products.map(product => ({\n    ...product,\n    categoryProductUrl: `/products/${product.categoryProductUrl.slice(12)}`,\n  })))\n  .reset(reset);\n\n\nhandleChange.watch(debounce(async (query) => {\n  if (query.length) {\n    await fxFetchProducts(query);\n  }\n}, 500));\n\n\nexport {\n  $results,\n  $isLoading,\n  reset,\n  handleChange,\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-textfield\",class:{ autocomplete: _vm.autocomplete },attrs:{\"tabindex\":\"-1\"},on:{\"focus\":function($event){_vm.isFocused = true},\"blur\":function($event){_vm.isFocused = false},\"click\":function($event){return _vm.$emit('toggle')}}},[_c('div',{staticClass:\"search-textfield__input-wrapper\",class:{ pulse: _vm.loading, 'with-result': _vm.isResultShown }},[_c('input',_vm._b({staticClass:\"search-textfield__input\",class:{ autocomplete: _vm.autocomplete },attrs:{\"type\":\"text\",\"placeholder\":\"Пошук...\"},domProps:{\"value\":_vm.query},on:{\"input\":function($event){return _vm.$emit('input', $event.target.value)},\"focus\":function($event){_vm.isFocused = true}}},'input',_vm.$attrs,false)),(_vm.loading && _vm.autocomplete)?_c('br-loader',{staticClass:\"search-textfield__loader\"}):_vm._e()],1),(_vm.isResultShown)?_c('ul',{staticClass:\"search-modal__results-list\"},_vm._l((_vm.results),function(product){return _c('li',{key:product.id,staticClass:\"search-modal__results-item\",on:{\"!click\":function($event){return _vm.handleClick($event)}}},[_c('router-link',{staticClass:\"body-text-14 search-modal__results-link\",attrs:{\"to\":product.categoryProductUrl}},[_vm._v(\"\\n        \"+_vm._s(product.title)+\"\\n      \")])],1)}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue, { PropType } from \"vue\";\n\nimport { BrLoader } from \"@/shared\";\nimport { Product } from \"@/services/products.service\";\n\nexport default Vue.extend({\n  name: \"SearchTextfield\",\n\n  components: {\n    BrLoader,\n  },\n\n  inheritAttrs: false,\n\n  model: {\n    prop: \"query\",\n    event: \"input\",\n  },\n\n  props: {\n    query: {\n      type: String,\n      default: \"\",\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n    autocomplete: {\n      type: Boolean,\n      default: false,\n    },\n    results: {\n      type: Array as PropType<Product[]>,\n      default: () => [],\n    },\n  },\n\n  data: () => ({\n    isFocused: false,\n  }),\n\n  computed: {\n    isResultShown(): boolean {\n      return this.isFocused && !!this.results.length && this.autocomplete && !!this.query.length;\n    },\n  },\n  methods: {\n    handleClick(ev: any) {\n      this.$emit(\"input\", ev.target.textContent.trim());\n      this.isFocused = false;\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchTextfield.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SearchTextfield.vue?vue&type=template&id=8cae4aa6&scoped=true&\"\nimport script from \"./SearchTextfield.vue?vue&type=script&lang=ts&\"\nexport * from \"./SearchTextfield.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SearchTextfield.vue?vue&type=style&index=0&id=8cae4aa6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8cae4aa6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-modal\"},[_c('div',{staticClass:\"search-modal__topbar\"},[_c('button',{staticClass:\"search-modal__close\",on:{\"click\":function($event){return _vm.$emit('toggle')}}},[_c('close-icon',{attrs:{\"fill\":\"#fff\"}})],1)]),_c('div',{staticClass:\"search-modal__body\"},[_c('header',{staticClass:\"search-modal__header\"},[_c('search-textfield',{ref:\"search\",attrs:{\"query\":_vm.query,\"loading\":_vm.loading},on:{\"input\":function($event){return _vm.$emit('input', $event)}}})],1),_c('ul',{staticClass:\"search-modal__results-list\"},_vm._l((_vm.results),function(product){return _c('li',{key:product.id,staticClass:\"search-modal__results-item\",on:{\"click\":function($event){return _vm.$emit('toggle')}}},[_c('router-link',{staticClass:\"body-text-14 search-modal__results-link\",attrs:{\"to\":product.categoryProductUrl}},[_vm._v(\"\\n          \"+_vm._s(product.title)+\"\\n        \")])],1)}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue, { PropType } from \"vue\";\n\nimport { reset } from \"../model\";\nimport { Product } from \"@/services/products.service\";\n\nimport SearchTextfield from \"./SearchTextfield.vue\";\nimport closeIcon from \"@/assets/vector/close.svg\";\n\nexport default Vue.extend({\n  name: \"SearchModal\",\n\n  components: {\n    SearchTextfield,\n    closeIcon,\n  },\n\n  model: {\n    prop: \"query\",\n    event: \"input\",\n  },\n\n  props: {\n    results: {\n      type: Array as PropType<Product[]>,\n      default: () => [],\n    },\n    query: {\n      type: String,\n      default: \"\",\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  destroyed() {\n    this.$emit(\"input\", \"\");\n    this.reset();\n  },\n\n  mounted() {\n    const search = (this.$refs.search as Vue).$el;\n    search.querySelector(\"input\")!.focus();\n  },\n\n  methods: {\n    reset,\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SearchModal.vue?vue&type=template&id=12a112aa&scoped=true&\"\nimport script from \"./SearchModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./SearchModal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SearchModal.vue?vue&type=style&index=0&id=12a112aa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12a112aa\",\n  null\n  \n)\n\nexport default component.exports","\nimport Vue from \"vue\";\nimport { createStoreObject } from \"effector\";\n\nimport { Product } from \"@/services/products.service\";\nimport { unlockBody, lockBody } from \"@/lib/body-lock\";\nimport { $isMobile } from \"@/core/session\";\nimport { $results, $isLoading, handleChange } from \"../model\";\n\nimport SearchTextfield from \"./SearchTextfield.vue\";\nimport SearchModal from \"./SearchModal.vue\";\n\nconst store = createStoreObject({\n  $isMobile,\n  $results,\n  $isLoading,\n});\n\nexport default Vue.extend({\n  name: \"Search\",\n\n  effector() {\n    return store;\n  },\n\n  components: {\n    SearchTextfield,\n    SearchModal,\n  },\n\n  data: () => ({\n    isOpened: false,\n    query: \"\",\n    state: {} as State<typeof store>,\n  }),\n\n  computed: {\n    results(): Product[] {\n      return this.state.$results\n        .filter(p => p.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\n    },\n  },\n\n  watch: {\n    query: \"handleChange\",\n  },\n\n  methods: {\n    handleChange,\n    handleToggle() {\n      if (!this.state.$isMobile) {\n        return;\n      }\n\n      this.isOpened = !this.isOpened;\n\n      // eslint-disable-next-line no-unused-expressions\n      this.isOpened ? lockBody() : unlockBody();\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=8ffb267a&\"\nimport script from \"./Search.vue?vue&type=script&lang=ts&\"\nexport * from \"./Search.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export { default as Search } from \"./components/Search.vue\";\n"],"sourceRoot":""}